(function(){const p=new URLSearchParams(location.search);if(p.get('debug')!=='1')return;const wrap=document.createElement('div');wrap.style.cssText='position:fixed;right:12px;bottom:12px;width:360px;max-height:50vh;overflow:auto;background:#0b1020;color:#e7f0ff;border:1px solid #2b3d7a;border-radius:10px;padding:10px;font:12px/1.4 system-ui,Segoe UI,Roboto,Arial;z-index:999999';wrap.innerHTML='<b>Role Inspector</b> <button id="ri-refresh" style="float:right">Neu laden</button><div id="ri-body" style="margin-top:8px;white-space:pre-wrap"></div>';document.body.appendChild(wrap);async function refresh(){const out=document.getElementById('ri-body');try{const s=await(window.sbAuth?.sbGetSession?.()||Promise.resolve(null));const p=await(window.sbAuth?.sbGetProfile?.()||Promise.resolve(null));const src=window.__ROLE_SOURCE__||'unknown';out.textContent=['Session user id: '+(s&&s.user&&s.user.id||'—'),'Session email  : '+(s&&s.user&&s.user.email||'—'),'Profile role   : '+(p&&p.role||'—'),'Source         : '+src].join('\n');}catch(e){out.textContent='Fehler beim Laden: '+(e&&e.message||String(e));}}document.getElementById('ri-refresh').onclick=refresh;refresh();})();